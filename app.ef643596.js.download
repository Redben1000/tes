(function(t){function e(e){for(var r,o,s=e[0],l=e[1],c=e[2],d=0,h=[];d<s.length;d++)o=s[d],i[o]&&h.push(i[o][0]),i[o]=0;for(r in l)Object.prototype.hasOwnProperty.call(l,r)&&(t[r]=l[r]);u&&u(e);while(h.length)h.shift()();return a.push.apply(a,c||[]),n()}function n(){for(var t,e=0;e<a.length;e++){for(var n=a[e],r=!0,s=1;s<n.length;s++){var l=n[s];0!==i[l]&&(r=!1)}r&&(a.splice(e--,1),t=o(o.s=n[0]))}return t}var r={},i={app:0},a=[];function o(e){if(r[e])return r[e].exports;var n=r[e]={i:e,l:!1,exports:{}};return t[e].call(n.exports,n,n.exports,o),n.l=!0,n.exports}o.m=t,o.c=r,o.d=function(t,e,n){o.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:n})},o.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},o.t=function(t,e){if(1&e&&(t=o(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var n=Object.create(null);if(o.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var r in t)o.d(n,r,function(e){return t[e]}.bind(null,r));return n},o.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return o.d(e,"a",e),e},o.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},o.p="/";var s=window["webpackJsonp"]=window["webpackJsonp"]||[],l=s.push.bind(s);s.push=e,s=s.slice();for(var c=0;c<s.length;c++)e(s[c]);var u=l;a.push([0,"chunk-vendors"]),n()})({0:function(t,e,n){t.exports=n("56d7")},"034f":function(t,e,n){"use strict";var r=n("64a9"),i=n.n(r);i.a},"0aa9":function(t,e,n){},"3b13":function(t,e,n){},"3c30":function(t,e,n){"use strict";var r=n("f618"),i=n.n(r);i.a},"4da5":function(t,e,n){},5362:function(t,e){t.exports="v1.5.2"},"56d7":function(t,e,n){"use strict";n.r(e);n("386d"),n("96cf");var r=n("3b8d"),i=(n("a481"),n("3b2b"),n("cadf"),n("551c"),n("f751"),n("097d"),n("2b0e")),a=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{attrs:{id:"app"}},[n("router-view")],1)},o=[],s={created:function(){}},l=s,c=(n("034f"),n("2877")),u=Object(c["a"])(l,a,o,!1,null,null,null),d=u.exports,h=n("8c4f"),m=function(){var t=this,e=t.$createElement,n=t._self._c||e;return t.showPopout?n("div",{staticStyle:{color:"#ccc",height:"100%",width:"100%",position:"absolute",top:"0",left:"0"}},[n("div",{staticStyle:{position:"absolute",top:"50%",transform:"translateY(-50%)","font-size":"20px","background-color":"darkgreen","text-align":"center",width:"100%",padding:"10px"}},[t._v("For full benefits, play this web monetized game in a "),n("a",{attrs:{href:t.thisHref,target:"_blank"}},[t._v("Separate Window")]),t._v(".")])]):n("div",[t.is2020?n("Unity2020",{attrs:{stageUrl:t.stageUrl,user:t.user,content:t.content,error:t.error,isLoaderOnly:t.isLoaderOnly}}):n("Unity",{attrs:{stageUrl:t.stageUrl,user:t.user,content:t.content,error:t.error,isLoaderOnly:t.isLoaderOnly}})],1)},g=[],p=(n("ac6a"),n("456d"),n("f559"),function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("div",{ref:"gameContainer",style:{width:t.width+"px",height:t.height+"px"},attrs:{id:"gameContainer"}}),n("div",{staticClass:"overlay"},[n("transition",{attrs:{name:"slide-fade"}},[t.progress<.999&&t.progress>0||!t.shouldInstantiateGame||t.error||t.localError?n("Loader",{style:{width:t.fitWidth+"px",height:t.fitHeight+"px"},attrs:{progress:t.progress,error:t.error||t.localError}}):t._e()],1),t.lowerThirdOn&&t.content?n("LowerThird",{staticStyle:{position:"absolute",bottom:"5px",left:"5px",transform:"scale(.7)"},attrs:{user:t.user,game:t.content.projectName}}):t._e()],1)])}),f=[],y=(n("5df3"),n("ac4d"),n("8a81"),n("cebc"));function v(t){return w.apply(this,arguments)}function w(){return w=Object(r["a"])(regeneratorRuntime.mark(function t(e){return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return t.abrupt("return",new Promise(function(t,n){var r=document.createElement("script");r.src=e,r.type="text/javascript",r.addEventListener("load",t),document.getElementsByTagName("head")[0].appendChild(r),r.addEventListener("error",n),setTimeout(n,2e3)}));case 1:case"end":return t.stop()}},t)})),w.apply(this,arguments)}var b=function(){var t=this,e=t.$createElement,n=t._self._c||e;return t.loaderDataLoaded?n("div",{staticClass:"container",style:{backgroundColor:t.loaderData.backgroundColor}},[n("div",{staticClass:"container-inner"},[n("div",{staticStyle:{height:"100%",display:"flex","align-items":"center","justify-content":"center","flex-direction":"column"}},[t.loaderData.logoOn?n("img",{staticStyle:{display:"block"},attrs:{src:t.loaderData.logoUrl}}):t._e(),t.loaderData.titleTextOn?n("div",{staticClass:"roboto",staticStyle:{"font-size":"45px","margin-top":"12px"},style:{color:t.loaderData.textColor}},[t._v("\n                "+t._s(t.loaderData.titleText)+"\n            ")]):t._e(),t.loaderDataLoaded&&"none"!==t.loaderData.loadingStringStyle?n("Messages",{staticStyle:{"margin-top":"8px"},style:{color:t.loaderData.textColor},attrs:{error:t.error}}):t._e()],1)]),t.error?t._e():n("div",{staticClass:"container-inner"},[n("div",{staticStyle:{position:"absolute",bottom:"10px",right:"10px"}},[n("div",{staticStyle:{color:"#9e9e9e","text-align":"center",transform:"translateY(43px)"}},[t.displayProgress<100?n("span",{style:{color:t.loaderData.textColor}},[t._v("\n                    "+t._s(t.displayProgress)+"\n                ")]):t._e()]),n("LoadingAnimation")],1)]),n("div",{staticClass:"container-inner"},[n("div",{staticStyle:{position:"absolute",top:"10px",right:"10px",opacity:"0.3","font-size":"10px"}},[t._v("frame "+t._s(t.version))])]),n("div",{staticClass:"container-inner "},[n("div",{staticStyle:{position:"absolute","pointer-events":"auto",bottom:"10px",left:"10px"},style:{color:t.loaderData.textColor}},["full"===t.loaderData.simmerBranding?n("div",{staticClass:"text-xs-center"},[n("a",{style:{color:t.loaderData.textColor},attrs:{href:"https://simmer.io/",target:"_blank"}},[n("img",{attrs:{src:"/images/simmer39.png"}})]),n("div",[n("a",{style:{color:t.loaderData.textColor},attrs:{href:"https://simmer.io/",target:"_blank"}},[t._v("Powered by SIMMER.io")])])]):"default"===t.loaderData.simmerBranding?n("div",{staticStyle:{bottom:"10px",left:"10px"}},[t.error?n("a",{style:{color:t.loaderData.textColor},attrs:{href:"https://simmer.io/support",target:"_top"}},[t._v("need help?")]):n("a",{style:{color:t.loaderData.textColor},attrs:{href:"https://simmer.io",target:"_blank"}},[t._v("free games in your browser")])]):"minimal"===t.loaderData.simmerBranding?n("div",{staticStyle:{bottom:"10px",left:"10px"}},[t.error?n("a",{style:{color:t.loaderData.textColor},attrs:{href:"https://simmer.io/support"}},[t._v("need help?")]):n("span",[t._v("hosted by "),n("a",{style:{color:t.loaderData.textColor},attrs:{href:"https://simmer.io",target:"_blank"}},[t._v("simmer.io")])])]):"none"===t.loaderData.simmerBranding?n("div"):t._e()])])]):t._e()},x=[],C=(n("c5f6"),function(){var t=this,e=t.$createElement;t._self._c;return t._m(0)}),S=[function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"lds-roller"},[n("div"),n("div"),n("div"),n("div"),n("div"),n("div"),n("div"),n("div")])}],O=n("2f62"),_={computed:Object(y["a"])({},Object(O["b"])(["loaderData"])),created:function(){var t='.lds-roller div:after {\n    content: " ";\n    display: block;\n    position: absolute;\n    width: 6px;\n    height: 6px;\n    border-radius: 50%;\n    background: '.concat(this.loaderData.textColor,";\n    margin: -3px 0 0 -3px;\n}"),e=document.createElement("style");e.setAttribute("type","text/css"),e.id="loadingAnimationColor",e.appendChild(document.createTextNode(t)),document.head.appendChild(e)},destroyed:function(){var t=document.getElementById("loadingAnimationColor");t&&t.parent&&t.parent.removeChild(t)}},T=_,k=(n("d777"),Object(c["a"])(T,C,S,!1,null,null,null)),U=k.exports,D=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[t._v("\n     \n    "),t.error?n("span",{staticStyle:{"background-color":"black",padding:"5px",border:"1px solid darkred"}},[t._v(t._s(t.error))]):t._e(),t._l(t.strings,function(e,r){return n("fade-transition",{key:r},[t.error||r!==t.showIndex||t.hide?t._e():n("span",{staticClass:"string"},[t._v(t._s(e))])])}),t._v("\n     \n")],2)},j=[],I=(n("28a5"),["Adjusting Bell Curves","Adding Hidden Agendas","Aesthesizing Industrial Areas","Applying Feng Shui Shaders","Aligning Covariance Matrices","Applying Theatre Soda Layer","Attempting to Lock Back-Buffer","Asserting Packed Exemplars","Binding Sapling Root System","Building Data Trees","Breeding Fauna","Bureacritizing Bureaucracies","Calculating Llama Expectoration Trajectory","Calculating Inverse Probability Matrices","Calibrating Blue Skies","Coalescing Cloud Formations","Charging Ozone Layer","Cohorting Exemplars","Compounding Inert Tessellations","Collecting Meteor Particles","Compressing Fish Files","Concatenating Sub-Contractors","Computing Optimal Bin Packing","Containing Existential Buffer","Debunching Unionized Commercial Services","Debarking Ark Ramp","Deciding What Message to Display Next","Decrementing Tectonic Plates","Decomposing Singular Values","Deleting Ferry Routes","Depositing Slush Funds","Depixelating Inner Mountain Surface Back Faces","Destabilizing Economic Indicators","Deunionizing Bulldozers","Determining Width of Blast Fronts","Dicing Models","Downloading Satellite Terrain Data","Diluting Livestock Nutrition Variables","Exposing Flash Variables to Streak System","Factoring Pay Scale","Extracting Resources","Fixing Election Outcome Matrix","Flood-Filling Ground Water","Flushing Pipe Network","Gathering Particle Sources","Generating Jobs","Gesticulating Mimes","Graphing Whale Migration","Hiding Willio Webnet Mask","Implementing Impeachment Routine","Increasing Magmafacation","Initializing Rhinoceros Breeding Timetable","Initializing Robotic Click-Path AI","Inserting Sublimated Messages","Integrating Curves","Integrating Illumination Form Factors","Integrating Population Graphs","Iterating Cellular Automata","Lecturing Errant Subsystems","Mixing Genetic Pool","Modeling Object Components","Mopping Occupant Leaks","Normalizing Power","Obfuscating Quigley Matrix","Overconstraining Dirty Industry Calculations","Partitioning City Grid Singularities","Perturbing Matrices","Pixalating Nude Patch","Polishing Water Highlights","Populating Lot Templates","Preparing Sprites for Random Walks","Prioritizing Landmarks","Projecting Law Enforcement Pastry Intake","Realigning Alternate Time Frames","Reconfiguring User Mental Processes","Relaxing Splines","Removing Road Network Speed Bumps","Removing Texture Gradients","Removing Vehicle Avoidance Behavior","Resolving GUID Conflict","Reticulating Splines","Retracting Phong Shader","Retrieving from Back Store","Reverse Engineering Image Consultant","Routing Neural Network Infanstructure","Scattering Rhino Food Sources","Scrubbing Terrain","Searching for Llamas","Seeding Architecture Simulation Parameters","Sequencing Particles","Setting Advisor Moods","Setting Inner Deity Indicators","Setting Universal Physical Constants","Sonically Enhancing Occupant-Free Timber","Speculating Stock Market Indices","Splatting Transforms","Stratifying Ground Layers","Sub-Sampling Water Data","Synthesizing Gravity","Synthesizing Wavelets","Time-Compressing Simulator Clock","Unable to Reveal Current Activity","Weathering Buildings","Zeroing Crime Network"]),L=n("7c76"),F=n("1a92"),R=n.n(F),E={data:function(){return{strings:null,showIndex:-1,hide:!1,interval:-1,timeout:-1}},props:{error:{type:String,default:null}},computed:Object(y["a"])({},Object(O["b"])(["loaderData"])),components:{FadeTransition:L["a"]},created:function(){this.strings=[],"default"===this.loaderData.loadingStringStyle?this.strings=I:"custom"===this.loaderData.loadingStringStyle&&(this.strings=this.loaderData.loadingStrings.split("\n")),this.loaderData.randomizeLoadingStrings&&(this.strings=R()(this.strings)),this.loaderData.firstLoadingString&&this.strings.unshift(this.loaderData.firstLoadingString)},mounted:function(){var t=this,e=function(){t.showIndex+=1,t.showIndex>=t.strings.length&&(t.showIndex=0),t.hide=!1,t.timeout=setTimeout(function(){t.hide=!0},4500)};this.interval=setInterval(e,5e3),e()},destroyed:function(){this.interval>=0&&clearInterval(this.interval),this.timeout>=0&&clearTimeout(this.timeout),this.strings=null}},A=E,P=Object(c["a"])(A,D,j,!1,null,null,null),M=P.exports,B=n("5362"),z=n.n(B),G={props:{progress:{type:Number,default:0},error:{type:String,default:null}},computed:Object(y["a"])({},Object(O["b"])(["loaderData","loaderDataLoaded"]),{displayProgress:function(){return Math.min(100,Math.ceil(112*this.progress))},version:function(){return z.a}}),components:{LoadingAnimation:U,Messages:M}},W=G,N=(n("3c30"),Object(c["a"])(W,b,x,!1,null,"89e653b2",null)),$=N.exports,H=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{attrs:{id:"lowerThird"}},[n("div",{staticClass:"flexContainer"},[n("div",{staticClass:"thirdsImg"},[n("img",{staticClass:"imgContainer",attrs:{src:t.customFrameAsset("lowerThird_image","/images/simmerPad.png")}})])]),n("div",{staticClass:"flexContainer"},[n("div",{staticClass:"container"},[n("div",{staticClass:"box1 base"}),n("div",{staticClass:"box2 color2",style:t.color2}),n("div",{staticClass:"box3 base"},[n("div",{staticClass:"text primTxt",style:t.primTxt},[t._v("\n                    "+t._s(t.user)+"\n                ")])])]),n("div",{staticClass:"lineBreak"}),n("div",{staticClass:"container"},[n("div",{staticClass:"box1 color1",style:t.color1}),n("div",{staticClass:"box2 color2",style:t.color2}),n("div",{staticClass:"box3 color1",style:t.color1},[n("div",{staticClass:"text secTxt"},[t._v("\n                    "+t._s(t.game)+"\n                ")])])])])])},q=[];n("bd86");function Y(t,e){var n=window.customFrame.assetBase_string,r=window.customFrame[t];return n&&r?"".concat(window.customFrame.assetBase_string).concat(window.customFrame[t]):e}function J(t,e){return window.customFrame[t]||e}var V={props:{user:{type:String,default:null},game:{type:String,default:null}},computed:{color1:function(){var t=J("lowerThird_color1");return t?{backgroundColor:t}:{}},color2:function(){var t=J("lowerThird_color2");return t?{backgroundColor:t}:{}},primTxt:function(){var t=J("lowerThird_color2");return t?{color:t}:{}}},methods:{customFrameAsset:function(){return Y.apply(this,arguments)}}},K=V,X=(n("5a85"),Object(c["a"])(K,H,q,!1,null,"20155738",null)),Q=X.exports,Z=n("e883"),tt=n.n(Z),et=n("b012"),nt={data:function(){return{unityConstants:null,width:900,height:600,fitWidth:900,fitHeight:600,canvas:null,progress:null,lowerThirdOn:!1,localError:null,jsChannel:null,useAlternateScreenshotMethod:!1}},props:{content:{type:Object,default:null},error:{type:String,default:null},user:{type:String,default:null},isLoaderOnly:{type:Boolean,default:null},stageUrl:{type:String,default:null}},computed:Object(y["a"])({},Object(O["b"])(["loaderData"]),{shouldInstantiateGame:function(){return!this.isLoaderOnly},isOnUploadPage:function(){return!!this.stageUrl}}),watch:{content:function(t){this.initializeGame(t.url,t.timestamp)}},methods:{assignCanvas:function(){var t=this,e=function(t){var e=!0,n=!1,r=void 0;try{for(var i,a=t[Symbol.iterator]();!(e=(i=a.next()).done);e=!0){var o=i.value,s=!0,l=!1,c=void 0;try{for(var u,d=o.addedNodes[Symbol.iterator]();!(s=(u=d.next()).done);s=!0){var h=u.value;if("#canvas"===h.id)return h}}catch(m){l=!0,c=m}finally{try{s||null==d.return||d.return()}finally{if(l)throw c}}}}catch(m){n=!0,r=m}finally{try{e||null==a.return||a.return()}finally{if(n)throw r}}return null};new MutationObserver(function(n){var r=e(n);r&&(t.canvas=r,t.canvas.style.maxWidth="100%",t.canvas.style.maxHeight="100%",t.onWindowResize(),this.disconnect())}).observe(this.$refs.gameContainer,{childList:!0})},initializeGame:function(){var t=Object(r["a"])(regeneratorRuntime.mark(function t(e){var n,r=arguments;return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return n=r.length>1&&void 0!==r[1]?r[1]:0,t.prev=1,t.next=4,Promise.all([v(e+"/Build/UnityLoader.js?t="+n),v(e+"/index.js?t="+n)]);case 4:t.next=10;break;case 6:return t.prev=6,t.t0=t["catch"](1),this.localError="Unable to find UnityLoader",t.abrupt("return");case 10:window.UnityLoader.Error.handler=function(){},this.unityConstants=window.UNITY_CONSTANTS,this.shouldInstantiateGame&&this.instantiateGame(e,n),window.onresize=Object(et["debounce"])(this.onWindowResize,200),this.onWindowResize();case 15:case"end":return t.stop()}},t,this,[[1,6]])}));function e(e){return t.apply(this,arguments)}return e}(),addTimestampsToDownloadJobs:function(t){var e=window.UnityLoader.downloadJob;window.UnityLoader.downloadJob=function(){arguments[1]&&arguments[1].parameters&&arguments[1].parameters.url&&t&&(arguments[1].parameters.url+="?t="+t),e.apply(this,arguments)}},instantiateGame:function(t,e){var n=this,r=this,i=!0;window.unityInstance=window.UnityLoader.instantiate("gameContainer",t+"/"+this.unityConstants.UNITY_WEBGL_BUILD_URL,{onProgress:function(t,n){i&&window.UnityLoader&&window.UnityLoader.downloadJob&&(r.addTimestampsToDownloadJobs(e),i=!1),r.progress=n},Module:{onRuntimeInitialized:function(){n.loaderData.lowerThirdOn&&setTimeout(function(){r.lowerThirdOn=!0,setTimeout(function(){r.lowerThirdOn=!1},4800)},4e3),n.isOnUploadPage&&(n.jsChannel&&n.jsChannel.call({method:"gameLoaded",success:function(){}}),setTimeout(function(){r.startAcquiringScreenshots()},3200))}}})},onWindowResize:function(){this.width=window.innerWidth,this.height=window.innerHeight;var t=Math.min(this.width/this.unityConstants.UNITY_WIDTH,this.height/this.unityConstants.UNITY_HEIGHT);this.fitWidth=Math.round(this.unityConstants.UNITY_WIDTH*t*100)/100,this.fitHeight=Math.round(this.unityConstants.UNITY_HEIGHT*t*100)/100,this.canvas&&(this.canvas.setAttribute("width",this.fitWidth),this.canvas.setAttribute("height",this.fitHeight),this.canvas.style.width="",this.canvas.style.height="")},acquireScreen:function(){var t=this,e=function(e){t.jsChannel&&t.jsChannel.call({method:"screenshotAcquired",params:{screenshotDataUrl:e},success:function(){}})},n=window.requestAnimationFrame,r=this;this.useAlternateScreenshotMethod?e(r.canvas.toDataURL()):window.requestAnimationFrame=function(){e(r.canvas.toDataURL()),n.apply(this,arguments),window.requestAnimationFrame=n}},startAcquiringScreenshots:function(){console.log("ready to acquire screens");var t=0,e=this;this.acquireScreen();var n=setInterval(function(){++t>=4&&clearInterval(n),e.acquireScreen()},5e3)},captureConsoleError:function(){var t=this,e=arguments,n=window.console.error;window.console.error=function(r){r.indexOf("Looks like you are rendering without using requestAnimationFrame for the main loop.")>=0&&(t.useAlternateScreenshotMethod=!0,t.jsChannel&&t.jsChannel.call({method:"requestAnimationFrameWarning",params:{},success:function(){}})),n.apply(t,e)}}},mounted:function(){this.isOnUploadPage&&window!==window.parent&&(this.jsChannel=tt.a.build({window:window.parent,origin:"*",scope:"simmer"}),this.captureConsoleError()),document.body.addEventListener("mousedown",function(t){1===t.button&&t.preventDefault()}),this.assignCanvas(),window.document.body.style.overflow="hidden",window.SET_DIMENSIONS=this.onWindowResize,this.stageUrl&&this.initializeGame(this.stageUrl)},destroyed:function(){window.document.body.style.overflow="",this.jsChannel&&(this.jsChannel.destroy(),this.jsChannel=null)},components:{Loader:$,LowerThird:Q}},rt=nt,it=(n("e5d8"),Object(c["a"])(rt,p,f,!1,null,"a36c3c36",null)),at=it.exports,ot=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("div",{ref:"container",staticClass:"unity-desktop",attrs:{id:"unity-container"}},[n("canvas",{ref:"canvas",attrs:{id:"unity-canvas"}}),n("div",{ref:"loadingBar",attrs:{id:"unity-loading-bar"}},[n("div",{attrs:{id:"unity-logo"}}),t._m(0)]),t._m(1)]),n("div",{staticClass:"overlay"},[n("transition",{attrs:{name:"slide-fade"}},[t.progress<.999&&t.progress>0||t.error?n("Loader",{style:{width:t.fitWidth+"px",height:t.fitHeight+"px"},attrs:{progress:t.progress,error:t.error}}):t._e()],1),t.lowerThirdOn&&t.content?n("LowerThird",{staticStyle:{position:"absolute",bottom:"5px",left:"5px",transform:"scale(.7)"},attrs:{user:t.user,game:t.content.projectName}}):t._e()],1)])},st=[function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{attrs:{id:"unity-progress-bar-empty"}},[n("div",{attrs:{id:"unity-progress-bar-full"}})])},function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{attrs:{id:"unity-footer"}},[n("div",{attrs:{id:"unity-webgl-logo"}}),n("div",{attrs:{id:"unity-fullscreen-button"}})])}],lt=function(t,e,n){var r=window.requestAnimationFrame;e?n(t.toDataURL()):window.requestAnimationFrame=function(){n(t.toDataURL()),r.apply(this,arguments),window.requestAnimationFrame=r}},ct={data:function(){return{unityConstants:{},jsChannel:null,useAlternateScreenshotMethod:!1,progress:null,lowerThirdOn:!1,fitWidth:900,fitHeight:600}},props:{content:{type:Object,default:null},error:{type:String,default:null},user:{type:String,default:null},stageUrl:{type:String,default:null}},computed:Object(y["a"])({},Object(O["b"])(["loaderData"]),{isOnUploadPage:function(){return!!this.stageUrl}}),watch:{content:function(t){this.unityConstants=t.unityData,this.initializeGame(this.content.url)}},methods:{captureConsoleError:function(){var t=this,e=arguments,n=window.console.error;window.console.error=function(r){r&&r.indexOf("Looks like you are rendering without using requestAnimationFrame for the main loop.")>=0&&(t.useAlternateScreenshotMethod=!0,t.jsChannel&&t.jsChannel.call({method:"requestAnimationFrameWarning",params:{},success:function(){}})),n.apply(t,e)}},startAcquiringScreenshots:function(){var t=0,e=this;this.acquireScreen();var n=setInterval(function(){++t>=4&&clearInterval(n),e.acquireScreen()},5e3)},onWindowResize:function(){var t=window.innerWidth,e=window.innerHeight,n=Math.min(t/this.unityConstants.UNITY_WIDTH,e/this.unityConstants.UNITY_HEIGHT);this.fitWidth=Math.round(this.unityConstants.UNITY_WIDTH*n*100)/100,this.fitHeight=Math.round(this.unityConstants.UNITY_HEIGHT*n*100)/100;var r=this.$refs.canvas;r&&(r.style.width=this.fitWidth+"px",r.style.height=this.fitHeight+"px")},acquireScreen:function(){var t=this;lt(this.$refs.canvas,this.useAlternateScreenshotMethod,function(e){t.jsChannel&&t.jsChannel.call({method:"screenshotAcquired",params:{screenshotDataUrl:e},success:function(){}})})},initializeGame:function(t){var e=this,n="".concat(t,"/Build"),r="".concat(t,"/StreamingAssets"),i=n+this.unityConstants.loaderUrl,a={dataUrl:n+this.unityConstants.dataUrl,frameworkUrl:n+this.unityConstants.frameworkUrl,codeUrl:n+this.unityConstants.codeUrl,streamingAssetsUrl:r,companyName:this.unityConstants.companyName,productName:this.unityConstants.productName,productVersion:this.unityConstants.productVersion},o=this.$refs.canvas,s=this.$refs.loadingBar;this.unityConstants.width||(this.unityConstants.width=this.unityConstants.UNITY_WIDTH),this.unityConstants.height||(this.unityConstants.height=this.unityConstants.UNITY_HEIGHT),o.style.width=this.unityConstants.width+"px",o.style.height=this.unityConstants.height+"px",s.style.display="block";var l=document.createElement("script");l.src=i;var c=this;l.onload=function(){window.createUnityInstance(o,a,function(t){e.progress=t}).then(function(){e.isOnUploadPage&&(e.jsChannel&&e.jsChannel.call({method:"gameLoaded",success:function(){}}),setTimeout(function(){c.startAcquiringScreenshots()},3200)),e.loaderData.lowerThirdOn&&setTimeout(function(){c.lowerThirdOn=!0,setTimeout(function(){c.lowerThirdOn=!1},4800)},4e3),s.style.display="none"}).catch(function(t){alert(t)})},document.body.appendChild(l),window.onresize=Object(et["debounce"])(this.onWindowResize,200),this.onWindowResize()}},mounted:function(){var t=Object(r["a"])(regeneratorRuntime.mark(function t(){return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:if(this.isOnUploadPage&&window!==window.parent&&(this.jsChannel=tt.a.build({window:window.parent,origin:"*",scope:"simmer"}),this.captureConsoleError()),!this.stageUrl){t.next=8;break}return t.next=4,v("".concat(this.stageUrl,"/index.js?t=").concat(+new Date));case 4:this.unityConstants=window.UNITY_CONSTANTS,this.initializeGame(this.stageUrl),t.next=9;break;case 8:this.content&&(this.unityConstants=this.content.unityData,this.initializeGame(this.content.url));case 9:window.document.body.style.overflow="hidden";case 10:case"end":return t.stop()}},t,this)}));function e(){return t.apply(this,arguments)}return e}(),destroyed:function(){window.document.body.style.overflow="",this.jsChannel&&(this.jsChannel.destroy(),this.jsChannel=null)},components:{Loader:$,LowerThird:Q}},ut=ct,dt=(n("9e28"),Object(c["a"])(ut,ot,st,!1,null,"cdf1f782",null)),ht=dt.exports,mt=(n("55dd"),n("7514"),n("59ca")),gt=n.n(mt);n("66ce"),n("bc3a");function pt(t){return ft.apply(this,arguments)}function ft(){return ft=Object(r["a"])(regeneratorRuntime.mark(function t(e){return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,gt.a.database().ref(e).once("value");case 2:return t.abrupt("return",t.sent.val());case 3:case"end":return t.stop()}},t)})),ft.apply(this,arguments)}function yt(t){return vt.apply(this,arguments)}function vt(){return vt=Object(r["a"])(regeneratorRuntime.mark(function t(e){return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,pt("usernames/".concat(e.toLowerCase(),"/uid"));case 2:return t.abrupt("return",t.sent);case 3:case"end":return t.stop()}},t)})),vt.apply(this,arguments)}function wt(){return bt.apply(this,arguments)}function bt(){return bt=Object(r["a"])(regeneratorRuntime.mark(function t(){var e,n,r,i,a,o,s,l,c,u=arguments;return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return e=u.length>0&&void 0!==u[0]?u[0]:{},n=e.username,r=e.guidOrFriendlyUrl,t.next=3,yt(n);case 3:return i=t.sent,t.next=6,xt("content","uid",i);case 6:return a=t.sent,a=a||{},o=Object.keys(a).map(function(t){return a[t].guid=t,a[t]}),s=null,r&&(r.startsWith("~")?(l=r.substr(1),s=o.find(function(t){return t.guid===l})):(c=r,s=o.find(function(t){return t.friendlyUrl===c}))),t.abrupt("return",{allContentArray:o,requestedContent:s});case 12:case"end":return t.stop()}},t)})),bt.apply(this,arguments)}function xt(t,e,n){return Ct.apply(this,arguments)}function Ct(){return Ct=Object(r["a"])(regeneratorRuntime.mark(function t(e,n,r){var i,a;return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return i=gt.a.database().ref(e),t.next=3,i.orderByChild(n).equalTo(r).once("value");case 3:return a=t.sent,t.abrupt("return",a.toJSON());case 5:case"end":return t.stop()}},t)})),Ct.apply(this,arguments)}var St={name:"app",data:function(){return{user:null,game:null,content:null,error:null,showPopout:!1,overridePopout:!1,stageUrl:null}},components:{Unity:at,Unity2020:ht},computed:{isLoaderOnly:function(){return this.$route.path.startsWith("/loader")},thisHref:function(){return window.location.href},is2020:function(){var t=this.content&&this.content.unityData&&this.content.unityData.IS_2020||"true"===this.$route.query.is2020;return!!t}},created:function(){var t=Object(r["a"])(regeneratorRuntime.mark(function t(){var e,n,r,i,a,o,s,l,c,u,d,h,m,g,p=this;return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:if(e=function(){try{return window.self!==window.top}catch(t){return!0}},n=function(){return p.content.isWebMonetized&&e()&&"1"===p.$route.query.hasMonetization},r=this.isLoaderOnly,i=this.$route.params.loaderId,!i){t.next=9;break}return t.next=7,gt.a.database().ref("/loading/"+i).once("value");case 7:this.$store.state.loaderData=t.sent.val(),this.$store.state.loaderDataLoaded=!0;case 9:if(r){t.next=49;break}if(t.prev=10,a=this.$route.params.mygamepage,!a){t.next=17;break}return t.next=15,xt("content","whitelabelUrl",a);case 15:o=t.sent,o&&(this.content=o[Object.keys(o)[0]]);case 17:if(s=this.$route.params.username,l=this.$route.params.guidOrFriendlyUrl,this.content||!s||!l){t.next=27;break}return this.user=this.$route.params.username.substr(1)||null,this.game=this.$route.params.guidOrFriendlyUrl||null,t.next=24,wt({username:this.user,guidOrFriendlyUrl:this.game});case 24:c=t.sent,u=c.requestedContent,u?this.content=u:this.error="Unable to find this game.";case 27:if(!this.content){t.next=40;break}if(d=!!this.content.useB2,h=d||this.content.timestamp&&this.content.timestamp<1648348951e3&&this.content.url.startsWith("https://simmercdn.com"),this.content&&"bf6ee85d-1bb4-4b5b-3af1-12c07e5e0237"===this.content.guid&&(h=!1),h?(this.content.url=this.content.url.replace("https://simmercdn.com","https://simmercdn-bb.com/file/simmercdn-bb"),console.log("storage: b2")):console.log("storage: gs"),this.showPopout=n(),!this.content.customLoading){t.next=38;break}return t.next=36,this.$store.dispatch("loadFromGuid",{guid:this.content.customLoading,uid:this.content.uid});case 36:t.next=39;break;case 38:"smg"===window.customFrameGlobals.skin&&this.$store.dispatch("loadFromSpecialLoaders",{skin:"smg"});case 39:this.content.projectName&&(document.getElementsByTagName("title")[0].innerText=this.content.projectName);case 40:m=this.$route.params.uid,g=this.$route.params.unityStageTimestamp,m&&g&&(this.stageUrl="https://simmercdn.com/unity/".concat(m,"/staging/").concat(g)),t.next=48;break;case 45:t.prev=45,t.t0=t["catch"](10),this.error="Error: Problem finding this game!";case 48:this.$store.state.loaderDataLoaded=!0;case 49:case"end":return t.stop()}},t,this,[[10,45]])}));function e(){return t.apply(this,arguments)}return e}()},Ot=St,_t=Object(c["a"])(Ot,m,g,!1,null,null,null),Tt=_t.exports;i["a"].use(h["a"]);var kt=new h["a"]({routes:[{path:"/:username(@.*?)/:guidOrFriendlyUrl",name:"UnityPage",component:Tt},{path:"/unity/:uid/staging/:unityStageTimestamp",name:"UnityPageStaging",component:Tt},{path:"/loader/:loaderId",name:"UnityPageLoaderOnly",component:Tt},{path:"/:mygamepage",name:"MyGameDotPage",component:Tt},{path:"*",beforeEnter:function(){window.location="https://simmer.io"}}],mode:"history"}),Ut=kt,Dt=n("72bf"),jt=n.n(Dt),It=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("span",[this.custom&&this.customCompute?n("span",{domProps:{innerHTML:t._s(this.customCompute)}}):n("span",[t._t("default")],2)])},Lt=[],Ft=(n("4917"),{props:{custom:{type:String,default:null}},computed:{customCompute:function(){if(this.custom&&window.customFrame[this.custom]){var t=window.customFrame[this.custom],e=t.match(/\{\{([^}+]+)\}\}/g)||[];return e.forEach(function(e){var n=e.substr(2,e.length-4),r=window.customSite[n];if(r){var i=new RegExp(e,"g");t=t.replace(i,r)}else console.log("couldn't find ".concat(n," variable in customSite."))}),t}return null}}}),Rt=Ft,Et=Object(c["a"])(Rt,It,Lt,!1,null,null,null),At=Et.exports;i["a"].use(O["a"]);var Pt={minimal_dark:{titleTextOn:!1,logoOn:!0,logoUrl:"/images/hourglass.png",backgroundColor:"#111111",textColor:"#cccccc",loadingStringStyle:"default",randomizeLoadingStrings:!0,simmerBranding:"minimal",lowerThirdOn:!1},smg:{titleTextOn:!0,titleText:"ShareMyGame.com",logoOn:!0,logoUrl:"/images/smg.png",backgroundColor:"#0B2240",textColor:"#cccccc",loadingStringStyle:"default",randomizeLoadingStrings:!0,simmerBranding:"full",lowerThirdOn:!0}},Mt=new O["a"].Store({state:{loaderData:{titleTextOn:!0,titleText:"simmer.io",logoOn:!0,logoUrl:"/images/simmer104.png",backgroundColor:"#240025",textColor:"#cccccc",loadingStringStyle:"default",firstLoadingString:"Free WebGL Game Hosting",randomizeLoadingStrings:!0,simmerBranding:"default",lowerThirdOn:!0},loaderDataLoaded:!1},actions:{loadFromSpecialLoaders:function(t,e){var n=t.state,r=e.skin;n.loaderData=Pt[r]},loadFromGuid:function(){var t=Object(r["a"])(regeneratorRuntime.mark(function t(e,n){var r,i,a,o,s,l;return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:if(r=e.state,i=n.guid,a=n.uid,!i){t.next=21;break}return t.next=6,gt.a.database().ref("readOnlyUserData/".concat(a)).once("value");case 6:if(t.t0=t.sent.val(),t.t0){t.next=9;break}t.t0={};case 9:if(o=t.t0,s=o&&!!o.planId,!s){t.next=21;break}if(l=null,!Pt[i]){t.next=17;break}l=Pt[i],t.next=20;break;case 17:return t.next=19,gt.a.database().ref("loading/".concat(i)).once("value");case 19:l=t.sent.val();case 20:l&&(r.loaderData=l);case 21:case"end":return t.stop()}},t)}));function e(e,n){return t.apply(this,arguments)}return e}()},mutations:{}});i["a"].config.productionTip=!1;var Bt="https://simmer-io.firebaseio.com";gt.a.initializeApp({apiKey:"AIzaSyBlAJqebixwCJr78s9Ksa6kV-rLUuTot5c",authDomain:"simmer-io.firebaseapp.com",databaseURL:Bt,projectId:"simmer-io",storageBucket:"simmer-io.appspot.com",messagingSenderId:"301433767487"}),function(t){RegExp.prototype.exec=function(){var e="Mozilla/5.0 (Macintosh; Intel Mac OS X 11";return arguments[0]&&arguments[0].replace&&0===arguments[0].indexOf(e)&&(arguments[0]=arguments[0].replace(e,"Mozilla/5.0 (Macintosh; Intel Mac OS X 10")),t.apply(this,arguments)}}(RegExp.prototype.exec),i["a"].component("custom-html",At),window.customFrame=window.customFrame||{};var zt=function(){var t=Object(r["a"])(regeneratorRuntime.mark(function t(){var e,n,r;return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:if(console.log("initializing iframe:",window.location.href),window.customFrameGlobals={isCanon:!0,skinBaseUrl:null},e=jt.a.parse(location.search),e.skinBaseUrl?(window.customFrameGlobals.isCanon=!1,window.customFrameGlobals.skinBaseUrl=e.skinBaseUrl):"smg"===e.skin&&(window.customFrameGlobals.skin="smg",window.customFrameGlobals.isCanon=!1,window.customFrameGlobals.skinBaseUrl="https://theroccob.github.io/custom-smg-simmer/customSite/"),n=null,!window.customFrameGlobals.isCanon){t.next=9;break}n="canon",t.next=14;break;case 9:return n="non-canon",r=window.customFrameGlobals.skinBaseUrl+"customFrame.js",t.next=13,v(r);case 13:console.log("loaded custom frame script: ",r);case 14:document.getElementsByTagName("body")[0].classList.add(n),new i["a"]({render:function(t){return t(d)},router:Ut,store:Mt}).$mount("#app");case 16:case"end":return t.stop()}},t)}));return function(){return t.apply(this,arguments)}}();zt()},"5a85":function(t,e,n){"use strict";var r=n("72e6"),i=n.n(r);i.a},"64a9":function(t,e,n){},"72e6":function(t,e,n){},"9e28":function(t,e,n){"use strict";var r=n("0aa9"),i=n.n(r);i.a},d777:function(t,e,n){"use strict";var r=n("3b13"),i=n.n(r);i.a},e5d8:function(t,e,n){"use strict";var r=n("4da5"),i=n.n(r);i.a},f618:function(t,e,n){}});
//# sourceMappingURL=app.ef643596.js.map